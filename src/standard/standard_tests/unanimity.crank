; testing this file
load ../unanimity.chbin

; test the unanimity

; only one signer
clear
push { ACCT_VALIDATIONKEYS: [ 1 ] }
push 0   ; the tx doesn't matter
push 0b1
event EVENT_CHANGEVALIDATION
run succeed

; two signers need 2 sigs
clear
push { ACCT_VALIDATIONKEYS: [ 1 2 ] }
push 0   ; the tx doesn't matter
push 0b11
event EVENT_CHANGEVALIDATION
run succeed

; 1/2 fails
clear
push { ACCT_VALIDATIONKEYS: [ 1 2 ] }
push 0   ; the tx doesn't matter
push 0b01
event EVENT_CHANGEVALIDATION
run fail

clear
push { ACCT_VALIDATIONKEYS: [ 1 2 ] }
push 0   ; the tx doesn't matter
push 0b10
event EVENT_CHANGEVALIDATION
run fail

; try combinations of 8 bits
clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 ] }
push 0   ; the tx doesn't matter
push 0x55AA
event EVENT_CHANGEVALIDATION
run fail

clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 ] }
push 0   ; the tx doesn't matter
push 0xFF
event EVENT_CHANGEVALIDATION
run fail

clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 ] }
push 0   ; the tx doesn't matter
push 0x7F01
event EVENT_CHANGEVALIDATION
run fail

; 9 bits should fail
clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 ] }
push 0   ; the tx doesn't matter
push 0x7F03
event EVENT_CHANGEVALIDATION
run fail

; 10 bits should fail
clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 ] }
push 0   ; the tx doesn't matter
push 0x7F07
event EVENT_CHANGEVALIDATION
run fail

; 10 bits should fail
clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 ] }
push 0   ; the tx doesn't matter
push 0x03FF
event EVENT_CHANGEVALIDATION
run fail

; 10 bits should fail
clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 ] }
push 0   ; the tx doesn't matter
push 0x7FE0
event EVENT_CHANGEVALIDATION
run fail

; as should 15
clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 ] }
push 0   ; the tx doesn't matter
push 0x7FFF
event EVENT_CHANGEVALIDATION
run fail

; all 16 should work
clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 ] }
push 0   ; the tx doesn't matter
push 0xFFFF
event EVENT_CHANGEVALIDATION
run succeed


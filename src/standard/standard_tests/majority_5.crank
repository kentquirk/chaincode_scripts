; testing this file
load ../majority.chbin

;===== works for any event =====
; requires greater than 50% of keys
; Expected arguments on the stack in order from bottom to top are:
;    account
;    transaction
;    bitmask of which authorized keys were found in the signature list

; test with combinations of 3 out of 5
clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 5 ] }
push 0   ; the tx doesn't matter
push 0b00111
event EVENT_CHANGEVALIDATION
run succeed

clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 5 ] }
push 0   ; the tx doesn't matter
push 0b10101
event EVENT_CHANGEVALIDATION
run succeed

clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 5 ] }
push 0   ; the tx doesn't matter
push 0b11100
event EVENT_CHANGEVALIDATION
run succeed

clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 5 ] }
push 0   ; the tx doesn't matter
push 0b10011
event EVENT_CHANGEVALIDATION
run succeed

; test with 4/5
clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 5 ] }
push 0   ; the tx doesn't matter
push 0b11101
event EVENT_CHANGEVALIDATION
run succeed

clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 5 ] }
push 0   ; the tx doesn't matter
push 0b11110
event EVENT_CHANGEVALIDATION
run succeed

clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 5 ] }
push 0   ; the tx doesn't matter
push 0b01111
event EVENT_CHANGEVALIDATION
run succeed

; check all 5
clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 5 ] }
push 0   ; the tx doesn't matter
push 0b11111
event EVENT_CHANGEVALIDATION
run succeed

; now start failing with 2/5
clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 5 ] }
push 0   ; the tx doesn't matter
push 0b11000
event EVENT_CHANGEVALIDATION
run fail

clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 5 ] }
push 0   ; the tx doesn't matter
push 0b00011
event EVENT_CHANGEVALIDATION
run fail

clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 5 ] }
push 0   ; the tx doesn't matter
push 0b10001
event EVENT_CHANGEVALIDATION
run fail

; and 1/5
clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 5 ] }
push 0   ; the tx doesn't matter
push 0b00001
event EVENT_CHANGEVALIDATION
run fail

clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 5 ] }
push 0   ; the tx doesn't matter
push 0b10000
event EVENT_CHANGEVALIDATION
run fail

clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 5 ] }
push 0   ; the tx doesn't matter
push 0b00100
event EVENT_CHANGEVALIDATION
run fail

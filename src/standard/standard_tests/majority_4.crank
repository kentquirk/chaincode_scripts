; testing this file
load ../majority.chbin

;===== works for any event =====
; requires greater than 50% of keys
; Expected arguments on the stack in order from bottom to top are:
;    account
;    transaction
;    bitmask of which authorized keys were found in the signature list

; test with combinations of 3 out of 4
clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 ] }
push 0   ; the tx doesn't matter
push 0b0111
event EVENT_CHANGEVALIDATION
run succeed

clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 ] }
push 0   ; the tx doesn't matter
push 0b1101
event EVENT_CHANGEVALIDATION
run succeed

clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 ] }
push 0   ; the tx doesn't matter
push 0b1110
event EVENT_CHANGEVALIDATION
run succeed

clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 ] }
push 0   ; the tx doesn't matter
push 0b1011
event EVENT_CHANGEVALIDATION
run succeed

; test with 4
clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 ] }
push 0   ; the tx doesn't matter
push 0b1111
event EVENT_CHANGEVALIDATION
run succeed

; now start failing with 2/4
clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 ] }
push 0   ; the tx doesn't matter
push 0b1100
event EVENT_CHANGEVALIDATION
run fail

clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 ] }
push 0   ; the tx doesn't matter
push 0b0011
event EVENT_CHANGEVALIDATION
run fail

clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 ] }
push 0   ; the tx doesn't matter
push 0b1001
event EVENT_CHANGEVALIDATION
run fail

; and 1/4
clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 ] }
push 0   ; the tx doesn't matter
push 0b0001
event EVENT_CHANGEVALIDATION
run fail

clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 ] }
push 0   ; the tx doesn't matter
push 0b1000
event EVENT_CHANGEVALIDATION
run fail

clear
push { ACCT_VALIDATIONKEYS: [ 1 2 3 4 ] }
push 0   ; the tx doesn't matter
push 0b0100
event EVENT_CHANGEVALIDATION
run fail
